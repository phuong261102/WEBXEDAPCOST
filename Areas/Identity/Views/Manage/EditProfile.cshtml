@model EditExtraProfileModel
@{
    ViewData["Title"] = "Hồ sơ cá nhân";
}

<h4>@ViewData["Title"]</h4>

<partial name="_StatusMessage" />

<div class="row">
    <div class="col-md-6">
        <form id="profile-form" method="post">
            <div asp-validation-summary="ModelOnly" class="text-danger"></div>
            <div class="form-group">
                <label asp-for="UserName"></label>
                <input asp-for="UserName" class="form-control" disabled />
            </div>
            <div class="form-group">
                <label asp-for="UserEmail"></label>
                <input asp-for="UserEmail" class="form-control" disabled />
            </div>

            <div class="form-group">
                <label asp-for="PhoneNumber"></label>
                <input asp-for="PhoneNumber" class="form-control" disabled />
            </div>
            <div class="form-group">
                <label asp-for="HomeAddress"></label>
                <select asp-for="HomeAddress" class="form-control"></select>
                <option value="HomeAddress" class="text-danger"></option>
            </div>
            <div class="form-group d-flex">
                <select asp-for="SelectedProvince" asp-items="Model.ProvinceOptions" class="form-control me-2">
                    <option value="">Chọn Tỉnh/Thành phố</option>
                </select>
                <select asp-for="SelectedDistrict" asp-items="Model.DistrictOptions" class="form-control me-2">
                    <option value="">Chọn Quận/Huyện</option>
                </select>
                <select asp-for="SelectedWard" asp-items="Model.WardOptions" class="form-control">
                    <option value="">Chọn Phường/Xã</option>
                </select>
            </div>
            <div class="form-group">
                <label asp-for="BirthDate"></label>
                <input asp-for="BirthDate" class="form-control" />
                <span asp-validation-for="BirthDate" class="text-danger"></span>
            </div>

            <button id="update-profile-button" type="submit" class="btn btn-primary">Lưu dữ liệu</button>
        </form>
    </div>
</div>


@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
        $('#SelectedProvince').change(function () {
            var provinceId = $(this).val();
            if (provinceId) {
                $.getJSON('/Member/GetDistrictsByProvinceId', { provinceId: provinceId }, function (districts) {
                    var districtSelect = $('#SelectedDistrict');
                    districtSelect.empty();
                    districtSelect.append($('<option/>', { value: '', text: 'Chọn Quận/Huyện' }));
                    $.each(districts, function (index, district) {
                        districtSelect.append($('<option/>', { value: district.id, text: district.name }));
                    });
                });
            } else {
                $('#SelectedDistrict').empty().append($('<option/>', { value: '', text: 'Chọn Quận/Huyện' }));
            }
            // Clear wards dropdown
            $('#SelectedWard').empty().append($('<option/>', { value: '', text: 'Chọn Phường/Xã' }));
        });

        $('#SelectedDistrict').change(function () {
            var districtId = $(this).val();
            if (districtId) {
                $.getJSON('/Member/GetWardsByDistrictId', { districtId: districtId }, function (wards) {
                    console.log(wards)
                    var wardSelect = $('#SelectedWard');
                    wardSelect.empty();
                    wardSelect.append($('<option/>', { value: '', text: 'Chọn Phường/Xã' }));
                    $.each(wards, function (index, ward) {
                        wardSelect.append($('<option/>', { value: ward.id, text: ward.name }));
                    });
                });
            } else {
                $('#SelectedWard').empty().append($('<option/>', { value: '', text: 'Chọn Phường/Xã' }));
            }
        });

    </script>
}