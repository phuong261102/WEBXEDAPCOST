@model IEnumerable<App.Models.Product>
@{
    ViewData["Title"] = "Sản phẩm";
}

<style>
    .wol {
        padding-left: 1%;
        width: 25%;
        height: 450px;
        padding-top: 1%;
    }

    .card {
        padding: 10px;
        height: 100%;
    }

    img {
        height: 250px;
        width: 100%;
    }

    .txt-edit {
        position: absolute;
        transform: translate(-23%, -33%)
    }

    .txt-delete {
        position: absolute;
        transform: translate(635%, -30%);
        border-left: solid thin rgba(0, 0, 0, 0.1);
    }

    .card {
        border: 1px solid;
        position: relative;
        overflow: hidden;
        border-radius: 10px 10px 10px 10px;
        box-shadow: 0;
    }

    .card-body {
        text-align: center;
        padding: 1rem 0.75rem 0.5rem 0.75rem;
        text-decoration: none;

    }

    .card-body h5 {
        font-size: 1rem;
        color: #007bff;
    }

    .card-body h6 {
        line-height: 1.6rem;
        font-size: 0.95rem;
    }

    .inside-edit {
        cursor: pointer;
        z-index: 9;
        background: #00c3ff;
        width: 140px;
        height: 140px;
        position: absolute;
        top: -70px;
        left: -70px;
        border-radius: 200px;
        transition: all 0.5s, border-radius 2s, top 1s;
        overflow: hidden;

        .icon {
            font-size: 1.3rem;
            position: absolute;
            right: 25%;
            top: 60%;
            color: white;
            opacity: 1;
        }

    }

    .inside-delete {
        cursor: pointer;
        z-index: 9;
        background: #ff0000;
        width: 140px;
        height: 140px;
        position: absolute;
        top: -90px;
        left: -70px;
        border-radius: 200px;
        transition: all 0.5s, border-radius 2s, top 1s;
        overflow: hidden;

        .icon {
            position: absolute;
            right: 30%;
            top: 69%;
            font-size: 1.3rem;
            color: white;
            opacity: 1;
        }

    }

    .inside-edit:hover,
    .inside-delete:hover {
        background: #dddddd;
    }
</style>



<body>
    <partial name="_StatusMessage" />
    <p>
        <a style="font-size: 20px; padding-left: 10px; text-decoration: none;" asp-action="Create">
            <i class="fa-solid fa-gears"></i>
            Tạo chuyên mục mới
        </a>
    </p>
    <hr>
    <p>
        Số lượng sản phẩm: @ViewBag.countproduct 
    </p>
    <div class="row">

        @foreach (var item in Model)
        {
            <a asp-action="Details" asp-route-id="@item.Id" class="text-center">
                <div class="wol">
                    <div class="card" style="width: 18rem; margin-bottom: 20px;">
                        <div class="car-head">
                            <img src="~/images/products/@item.Slug/@item.MainImage" class="card-img-top"
                                alt="Product Image">
                        </div>
                        <div class="card-body">
                            <h5 class="card-title">@Html.DisplayFor(modelItem => item.Name)</h5>
                            <h6>
                                @if (item.DiscountPrice.HasValue)
                                {
                                    <span style="text-decoration: line-through;">@Html.DisplayFor(modelItem =>
                                item.Price)</span>
                                    <br />
                                    <span>@Html.DisplayFor(modelItem => item.DiscountPrice)</span>
                                }
                                else
                                {
                                    <span>@Html.DisplayFor(modelItem => item.Price)</span>
                                }
                                <div style="padding-top: 5px;">
                                    <a href="#" onclick="showPopup('warning-popup')"
                                        class="btn btn-sm btn-warning">Delete</a>
                                    <form id="delete-form" style="display: none;" asp-action="Delete"
                                        asp-route-id="@item.Id">
                                        <input type="submit" value="Confirm">
                                    </form>
                                </div>
                            </h6>
                            <div class="inside-edit">
                                <a style="font-size: 0.8rem;" asp-action="Edit" asp-route-id="@item.Id"
                                    class="btn btn-primary">
                                    <div class="icon">
                                        <i class="fa-solid fa-gear"></i>
                                    </div>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </a>

        }
    </div>
    <div class="justify-content-center d-flex mt-5 ps-3 pe-3">
        <partial name="_PagingXTL" model="@ViewBag.pagingmodel" />

    </div>

    <div id="warning-popup" class="popup-0">
        <div class="popup-content">
            <p>Are you sure you want to delete this item?</p>
            <button onclick="document.getElementById('delete-form').submit()">Yes</button>
            <button class="no" onclick="hidePopup('warning-popup')">
                <i class="fa-solid fa-circle-xmark"></i>
            </button>
        </div>
    </div>
    <script>
        function showPopup(id) {
            document.getElementById(id).classList.add('show');
        }

        function hidePopup(id) {
            document.getElementById(id).classList.remove('show');
        }
    </script>

</body>